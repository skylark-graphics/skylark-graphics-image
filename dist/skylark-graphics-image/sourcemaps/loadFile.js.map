{"version":3,"sources":["loadFile.js"],"names":["define","imagex","loadFile","file","callback","options","url","img","document","createElement","onerror","event","onload","fetchBlob","blob","createObjectURL","crossOrigin","src","isInstanceOf","_objectURL","readFile","e","target","result"],"mappings":";;;;;;;AAAAA,QACE,YACC,SAASC,GAEV,aAwDA,OAAOA,EAAOC,SAlDd,SAAmBC,EAAMC,EAAUC,GACjC,IACIC,EADAC,EAAMC,SAASC,cAAc,OAQjC,OANAF,EAAIG,QAAU,SAAUC,GACtB,OAAOV,EAAOS,QAAQH,EAAKI,EAAOR,EAAMC,EAAUC,IAEpDE,EAAIK,OAAS,SAAUD,GACrB,OAAOV,EAAOW,OAAOL,EAAKI,EAAOR,EAAMC,EAAUC,IAE/B,iBAATF,GACTF,EAAOY,UACLV,EACA,SAAUW,GACJA,GACFX,EAAOW,EACPR,EAAML,EAAOc,gBAAgBZ,KAE7BG,EAAMH,EACFE,GAAWA,EAAQW,cACrBT,EAAIS,YAAcX,EAAQW,cAG9BT,EAAIU,IAAMX,GAEZD,GAEKE,GAEPN,EAAOiB,aAAa,OAAQf,IAG5BF,EAAOiB,aAAa,OAAQf,IAE5BG,EAAMC,EAAIY,WAAalB,EAAOc,gBAAgBZ,KAE5CI,EAAIU,IAAMX,EACHC,GAEFN,EAAOmB,SAASjB,EAAM,SAAUkB,GACrC,IAAIC,EAASD,EAAEC,OACXA,GAAUA,EAAOC,OACnBhB,EAAIU,IAAMK,EAAOC,OACRnB,GACTA,EAASiB,UAhBR","file":"../loadFile.js","sourcesContent":["define([\r\n  \"./imagex\"\r\n], function(imagex) {\r\n\r\n  'use strict'\r\n\r\n  // Loads an image for a given File object.\r\n  // Invokes the callback with an img or optional canvas\r\n  // element (if supported by the browser) as parameter:\r\n\r\n  function loadFile (file, callback, options) {\r\n    var img = document.createElement('img')\r\n    var url\r\n    img.onerror = function (event) {\r\n      return imagex.onerror(img, event, file, callback, options)\r\n    }\r\n    img.onload = function (event) {\r\n      return imagex.onload(img, event, file, callback, options)\r\n    }\r\n    if (typeof file === 'string') {\r\n      imagex.fetchBlob(\r\n        file,\r\n        function (blob) {\r\n          if (blob) {\r\n            file = blob\r\n            url = imagex.createObjectURL(file)\r\n          } else {\r\n            url = file\r\n            if (options && options.crossOrigin) {\r\n              img.crossOrigin = options.crossOrigin\r\n            }\r\n          }\r\n          img.src = url\r\n        },\r\n        options\r\n      )\r\n      return img\r\n    } else if (\r\n      imagex.isInstanceOf('Blob', file) ||\r\n      // Files are also Blob instances, but some browsers\r\n      // (Firefox 3.6) support the File API but not Blobs:\r\n      imagex.isInstanceOf('File', file)\r\n    ) {\r\n      url = img._objectURL = imagex.createObjectURL(file)\r\n      if (url) {\r\n        img.src = url\r\n        return img\r\n      }\r\n      return imagex.readFile(file, function (e) {\r\n        var target = e.target\r\n        if (target && target.result) {\r\n          img.src = target.result\r\n        } else if (callback) {\r\n          callback(e)\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  return imagex.loadFile = loadFile;\r\n\r\n});"]}