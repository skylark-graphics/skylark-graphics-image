/**
 * skylark-graphics-image - The skylark imagex utility library
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.0
 * @link www.skylarkjs.org
 * @license MIT
 */
define(["./imagex"],function(t){"use strict";function i(t,i,e,h,o,n,a,r,d,c){return t.getContext("2d").drawImage(i,e,h,o,n,a,r,d,c),t}return t.scale=function(t,e,h){e=e||{};var o,n,a,r,d,c,g,u,m,s,v,f=document.createElement("canvas"),l=t.getContext||function(t){return t.canvas||t.crop||!!t.aspectRatio}(e)&&f.getContext,x=t.naturalWidth||t.width,p=t.naturalHeight||t.height,w=x,H=p;function W(){var t=Math.max((a||w)/w,(r||H)/H);t>1&&(w*=t,H*=t)}function b(){var t=Math.min((o||w)/w,(n||H)/H);t<1&&(w*=t,H*=t)}if(l&&(g=(e=function(t,i){var e,h,o,n,a=i.aspectRatio;if(!a)return i;for(h in e={},i)i.hasOwnProperty(h)&&(e[h]=i[h]);return e.crop=!0,(o=t.naturalWidth||t.width)/(n=t.naturalHeight||t.height)>a?(e.maxWidth=n*a,e.maxHeight=n):(e.maxWidth=o,e.maxHeight=o/a),e}(t,e)).left||0,u=e.top||0,e.sourceWidth?(d=e.sourceWidth,void 0!==e.right&&void 0===e.left&&(g=x-d-e.right)):d=x-g-(e.right||0),e.sourceHeight?(c=e.sourceHeight,void 0!==e.bottom&&void 0===e.top&&(u=p-c-e.bottom)):c=p-u-(e.bottom||0),w=d,H=c),o=e.maxWidth,n=e.maxHeight,a=e.minWidth,r=e.minHeight,l&&o&&n&&e.crop?(w=o,H=n,(v=d/c-o/n)<0?(c=n*d/o,void 0===e.top&&void 0===e.bottom&&(u=(p-c)/2)):v>0&&(d=o*c/n,void 0===e.left&&void 0===e.right&&(g=(x-d)/2))):((e.contain||e.cover)&&(a=o=o||a,r=n=n||r),e.cover?(b(),W()):(W(),b())),l){if((m=e.pixelRatio)>1&&(f.style.width=w+"px",f.style.height=H+"px",w*=m,H*=m,f.getContext("2d").scale(m,m)),(s=e.downsamplingRatio)>0&&s<1&&w<d&&H<c)for(;d*s>w;)f.width=d*s,f.height=c*s,i(f,t,g,u,d,c,0,0,f.width,f.height),g=0,u=0,d=f.width,c=f.height,(t=document.createElement("canvas")).width=d,t.height=c,i(t,f,0,0,d,c,0,0,d,c);return f.width=w,f.height=H,i(f,t,g,u,d,c,0,0,w,H)}return t.width=w,t.height=H,t}});
//# sourceMappingURL=sourcemaps/scale.js.map
